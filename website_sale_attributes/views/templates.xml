<?xml version="1.0" encoding="UTF-8"?>
<odoo>
    <template id="products_attributes_visible" inherit_id="website_sale.products" active="False" customize_show="True" name="Product Attribute's Filters in usage">
        <xpath expr="//div[@id='products_grid_before']" position="inside">
            <t t-if="int(category or 0) == 0">
                <t t-set="attrib_visible_show" t-value="attrib_visible_all"/>
            </t>
            <t t-else="">
                <t t-set="attrib_visible_show" t-value="attrib_visible"/>
            </t>
            <div id="accordion_attribures" class="panel-group">
            <div class="panel panel-info" style="margin: 0px; border-radius: 0; border-left: none; border-right: none; border-top: none;">
                <div class="panel-heading" style="border-radius: 0; border: none;">
                    <button class="btn btn-link" style="padding: 0px; border-radius: 0px; border: none;" data-toggle="collapse" data-parent="accordion_attribures" data-target="#filter_products_attributes" aria-label="Close The filters box">Filtered</button>
                </div>
                <div id="filter_products_attributes" class="panel-collapse collapse in">
                <div class="panel-body" style="border-radius: 0; border: none;">
                    <form class="js_attributes" method="get" style="padding-left: 15px; padding-right: 15px;">
                        <input type="hidden" name="search" t-att-value="search" />
                        <ul class="nav nav-pills nav-stacked mt16">
                            <t t-foreach="attributes_all" t-as="a">
                                <li t-if="a.value_ids and len(a.value_ids) &gt; 1">
                                    <div>
                                        <strong t-field="a.name" />
                                    </div>
                                    <t t-if="a.type == 'select'">
                                        <select class="form-control" name="attrib">
                                            <option value="" />
                                            <t t-foreach="a.value_ids" t-as="v">
                                                <t t-if="v.id in attrib_visible_show">
                                                    <option t-att-value="'%s-%s' % (a.id,v.id)" t-esc="v.name" t-att-selected="v.id in attrib_set" />
                                                </t>
                                            </t>
                                        </select>
                                    </t>
                                    <t t-if="a.type == 'radio'">
                                        <ul class="nav nav-pills nav-stacked">
                                            <t t-foreach="a.value_ids" t-as="v">
                                                <t t-if="v.id in attrib_visible_show">
                                                <li t-att-class="'active' if v.id in attrib_set else None">
                                                    <label style="margin: 0 20px;">
                                                        <input type="checkbox" name="attrib" t-att-value="'%s-%s' % (a.id,v.id)" t-att-checked="'checked' if v.id in attrib_set else None" />
                                                        <span style="font-weight: normal" t-field="v.name" />
                                                    </label>
                                                </li>
                                                </t>
                                            </t>
                                        </ul>
                                    </t>
                                    <t t-if="a.type == 'color'">
                                        <t t-foreach="a.value_ids" t-as="v">
                                            <t t-if="v.id in attrib_visible_show">
                                            <label t-attf-style="background-color:#{v.html_color or v.name}" t-attf-class="css_attribute_color #{'active' if v.id in attrib_set else ''}">
                                                <input type="checkbox" name="attrib" t-att-value="'%s-%s' % (a.id,v.id)" t-att-checked="'checked' if v.id in attrib_set else None" t-att-title="v.name" />
                                            </label>
                                            </t>
                                        </t>
                                    </t>
                                    <t t-if="a.type == 'image'">
                                        <t t-foreach="a.value_ids" t-as="v">
                                            <t t-if="v.id in attrib_visible_show">
                                            <label t-attf-style="background-image: url('#{website.image_url(v, 'image_small')}')"
                                                t-attf-class="css_attribute_image #{'active' if v.id in attrib_set else ''}">
                                                <input type="radio"
                                                  name="attrib"
                                                  t-att-value="'%s-%s' % (a.id,v.id)"
                                                  t-att-checked="'checked' if v.id in attrib_set else None"
                                                  t-att-title="v.name" />
                                            </label>
                                            </t>
                                        </t>
                                    </t>
                                </li>
                            </t>
                        </ul>
                    </form>
                </div>
                </div>
            </div>
            <t t-if="attrib_values">
            <div class="panel panel-info" style="margin: 0px; border-radius: 0; border: none;">
                <div class="panel-heading" style="border-radius: 0; border: none;">
                    <button class="btn btn-link" style="padding: 0px; border-radius: 0px; border: none;" data-toggle="collapse" data-parent="accordion_attribures" data-target="#show_products_attributes" aria-label="Show The filtered box">Filters</button>
                </div>
                <div id="show_products_attributes" class="panel-collapse collapse">
                <div class="panel-body" style="border-radius: 0; border: none;">
                    <div style="padding-left: 15px; padding-right: 15px;">
                    <ul class="list-inline pull-left">
                        <li t-if="attrib_values" id="clear_all">
                            <a href="/shop"><span>Clear all filters</span> <i class="fa fa-eraser" aria-hidden="true"/></a>
                        </li>
                        <t t-foreach="attributes_all" t-as="a">
                            <li t-if="a.id in [x[0] for x in attrib_values]">
                                <label t-field="a.name"/>:
                                <t t-foreach="a.value_ids" t-as="v">
                                    <t t-if="a.type == 'color'">
                                        <label t-if="v.id in [x[1] for x in attrib_values]" t-attf-style="background-color:#{v.html_color or v.name}; height: 34px; width: 34px;"/>
                                    </t>
                                    <t t-if="a.type in ('radio', 'select')">
                                        <span t-if="v.id in [x[1] for x in attrib_values]" t-field="v.name"/>
                                    </t>
                                </t>
                            </li>
                        </t>
                    </ul>
                    </div>
                </div>
                </div>
            </div>
            </t>
            </div>
        </xpath>
        <xpath expr="//div[@id='products_grid_before']" position="attributes">
            <attribute name="class">col-md-3 col-sm-4 col-xs-12</attribute>
            <attribute name="style">padding: 0px; box-shadow: rgb(136, 136, 136) 5px 10px 18px; border-radius: 0px;</attribute>
        </xpath>
        <xpath expr="//div[@id='products_grid']" position="attributes">
            <attribute name="class">col-md-9 col-sm-8</attribute>
        </xpath>
    </template>
</odoo>
